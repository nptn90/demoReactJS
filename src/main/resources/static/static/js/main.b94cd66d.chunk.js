(this.webpackJsonpmyreact=this.webpackJsonpmyreact||[]).push([[0],{33:function(e){e.exports=JSON.parse('[{"id":"1","name":"Angular 4x","time":"30h","free":true,"desc":"Angular is complicated","lessons":[{"id":"1","name":"Basic Angular"},{"id":"2","name":"Advance Angular"},{"id":"3","name":"Summary Angular"}]},{"id":"2","name":"NodeJs","time":"55h","free":false,"courseName":"NodeJs","lessons":[{"id":"4","name":"Basic NodeJs"},{"id":"5","name":"Advance NodeJs"},{"id":"6","name":"Summary NodeJs"}]},{"id":"3","name":"ReactJS","time":"40h","free":true,"desc":"ReactJS is simple","lessons":[{"id":"7","name":"Basic ReactJS"},{"id":"8","name":"Advance ReactJS"},{"id":"9","name":"Extrame ReactJS"},{"id":"10","name":"Summary ReactJS"}]}]')},35:function(e,t,n){e.exports=n(63)},40:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(29),o=n.n(l),i=(n(40),n(1)),s=n(2),c=n(3),u=n(4),m=n(12),h=n(15),p=n(6),d=n(30),f=n.n(d).a.create({baseURL:"/api",headers:{"content-type":"application/json; charset=utf-8"}});f.interceptors.request.use((function(e){return sessionStorage.getItem("token")&&(e.headers["x-token"]="Bearer "+sessionStorage.getItem("token")),e}));var g=f,b={login:function(e){return g.post("/public/login",JSON.stringify(e))},refreshToken:function(){var e=sessionStorage.getItem("token");if(e)return g.post("/public/refresh",e)}},v=r.a.createContext,E=r.a.Component,k=(r.a.useContext,v(null)),N=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={token:null,currentUser:null},a}return Object(s.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement(k.Provider,{value:{state:this.state,displayToken:function(){console.log("Token: "+e.state.token)},login:function(t,n){e.setState({token:n.token,currentUser:t})}}},this.props.children)}}]),n}(E),O={intervalRefreshToken:function(e){var t=e-(new Date).getTime()-6e4;t=6e4>t?6e4:t,console.log(t),setInterval((function(){b.refreshToken().then((function(e){var t=e.data;console.log("new Token: "+t.token),console.log("ntokenExpirationTime: "+t.expirationDate),sessionStorage.setItem("token",t.token),sessionStorage.setItem("tokenExpirationTime",t.expirationDate)})).catch((function(e){console.log(e)}))}),t)}},y=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={isRedirectToReffer:!1},a.handleLogin=a.handleLogin.bind(Object(p.a)(a)),a.handleChangeInput=a.handleChangeInput.bind(Object(p.a)(a)),a.state={userName:null,passWord:null},a}return Object(s.a)(n,[{key:"handleChangeInput",value:function(e){var t=e.target.name,n=e.target.value;this.setState(Object(h.a)({},t,n))}},{key:"refreshToken",value:function(e){O.intervalRefreshToken(e)}},{key:"handleLogin",value:function(e,t){var n=this;e.preventDefault();var a={passWord:this.state.passWord,userName:this.state.userName};b.login(a).then((function(e){var r=e.data;t.login(a.userName,r),sessionStorage.setItem("token",r.token),sessionStorage.setItem("tokenExpirationTime",r.expirationDate),n.refreshToken(r.expirationDate),t.displayToken(),n.setState({isRedirectToReffer:!0})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state.isRedirectToReffer,n=(this.props.location.state||{from:{pathname:"/"}}).from;return t?r.a.createElement(m.b,{to:n.pathname}):r.a.createElement("div",{className:"simple-login-container"},r.a.createElement("h2",null,"Login Form"),r.a.createElement(k.Consumer,null,(function(t){return r.a.createElement("form",{onSubmit:function(n){return e.handleLogin(n,t)}},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 form-group"},r.a.createElement("input",{name:"userName",type:"text",onChange:function(t){return e.handleChangeInput(t)},className:"form-control",placeholder:"Username"}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 form-group"},r.a.createElement("input",{name:"passWord",type:"password",onChange:function(t){return e.handleChangeInput(t)},placeholder:"Enter your Password",className:"form-control"}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 form-group"},r.a.createElement("button",{type:"submit",className:"btn btn-block btn-login"},"Login"))))})))}}]),n}(a.Component),j=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return r.a.createElement("li",{className:"list-group-item"},this.props.lessonsName)}}]),n}(a.Component),C=n(10),S=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleClick3=a.handleClick3.bind(Object(p.a)(a)),a.register=a.register.bind(Object(p.a)(a)),a.userNameRef=r.a.createRef(),a.handleToogleOutline=a.handleToogleOutline.bind(Object(p.a)(a)),a.handleClickTitle=a.handleClickTitle.bind(Object(p.a)(a)),a.state={isShowOutline:!1,courseBody:[],isBlocking:!1,reDirectToRegisterPage:!1},a}return Object(s.a)(n,[{key:"handleClick1",value:function(){alert("click1")}},{key:"handleClick2",value:function(e){alert(e)}},{key:"handleClick3",value:function(){alert(this.props.name)}},{key:"register",value:function(e){console.log(this.userNameRef.current.value),e.preventDefault(),this.setState({isBlocking:!1,reDirectToRegisterPage:!0})}},{key:"handleToogleOutline",value:function(){this.setState({isShowOutline:!this.state.isShowOutline})}},{key:"componentWillMount",value:function(){}},{key:"handleClickTitle",value:function(){this.props.onChangeTitle(this.props.name)}},{key:"setIsBlockingState",value:function(e){this.setState({isBlocking:e.target.value.length>0})}},{key:"showButtonFree",value:function(){var e=this;return this.props.free?r.a.createElement("div",{className:"btn-group"},r.a.createElement("button",{type:"button",onClick:this.handleClick1,className:"btn btn-danger"},"Left"),r.a.createElement("button",{type:"button",onClick:function(){return e.handleClick2("View 2")},className:"btn btn-warning"},"Middle"),r.a.createElement("button",{type:"button",onClick:this.handleClick3,className:"btn btn-info"},"Right"),r.a.createElement("button",{type:"button",onClick:this.handleClickTitle,className:"btn btn-success"},"ChangeTitle")):r.a.createElement("form",{onSubmit:function(t){return e.register(t)}},r.a.createElement("div",{className:"input-group"},r.a.createElement("span",{className:"input-group-btn"},r.a.createElement("button",{className:"btn btn-info",type:"submit"},"Register!")),r.a.createElement("input",{type:"text",onChange:function(t){return e.setIsBlockingState(t)},className:"form-control",placeholder:"UserName",ref:this.userNameRef})))}},{key:"render",value:function(){var e;if(this.state.reDirectToRegisterPage)return r.a.createElement(m.b,{to:"/register/"+this.userNameRef.current.value});if(this.state.isShowOutline){var t=this.props.lessons.map((function(e,t){return r.a.createElement(j,{key:t,lessonsName:e.name})}));e=r.a.createElement("ul",{className:"list-group"},t)}return r.a.createElement("div",{className:"col-xs-4 col-sm-4 col-md-4 col-lg-4"},r.a.createElement(m.a,{when:this.state.isBlocking,message:function(e){return"Are you sure you want to go to ".concat(e.pathname)}}),r.a.createElement("div",{className:"panel panel-info"},r.a.createElement("div",{className:"panel-heading"},r.a.createElement("h3",{className:"panel-title"},this.props.name)),r.a.createElement("div",{className:"panel-body"},r.a.createElement("p",null,this.props.time),r.a.createElement("p",null,this.props.children),r.a.createElement("div",{className:"btn-group"},r.a.createElement("p",null,r.a.createElement("button",{type:"button",onClick:this.handleToogleOutline,className:"btn btn-success"},"Toogle outline"),r.a.createElement(C.b,{to:"/detail/"+this.props.courseId,className:"btn btn-default"},"See details"))),e),r.a.createElement("div",{className:"panel-footer"},this.showButtonFree())))}}]),n}(a.Component),T=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"page-header"},r.a.createElement("h1",null,this.props.mainTitle,r.a.createElement("br",null),r.a.createElement("small",null,this.props.subTitle)))}}]),n}(a.Component),R=n(33),x=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleChangeTitle=a.handleChangeTitle.bind(Object(p.a)(a)),a.state={mainTitle:"Main Title",subTitle:"Sub Title"},a}return Object(s.a)(n,[{key:"handleChangeTitle",value:function(e){this.setState({mainTitle:e,subTitle:e})}},{key:"render",value:function(){var e=this,t=R.map((function(t,n){return r.a.createElement(S,{key:n,courseId:t.id,name:t.name,time:t.time,free:t.free,lessons:t.lessons,onChangeTitle:function(t){return e.handleChangeTitle(t)}}," ",t.desc," ")}));return r.a.createElement("div",null,r.a.createElement(T,{mainTitle:this.state.mainTitle,subTitle:this.state.subTitle}),r.a.createElement("div",{className:"row"},t))}}]),n}(a.Component),I=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"page-header"},r.a.createElement("h1",null,"Not found 404"))}}]),n}(a.Component),w=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props.match.params.cid;return r.a.createElement("div",null,r.a.createElement("div",{className:"panel panel-info"},r.a.createElement("div",{className:"panel-heading"},r.a.createElement("h3",{className:"panel-title"},e)),r.a.createElement("div",{className:"panel-body"})))}}]),n}(a.Component),B=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={txtUserName:null,txtFullName:null,textEmail:null,isBlocking:!1,isRedirectToSuccessPages:!1},a.handleInputChange=a.handleInputChange.bind(Object(p.a)(a)),a.handleSubmitRegisterForm=a.handleSubmitRegisterForm.bind(Object(p.a)(a)),a}return Object(s.a)(n,[{key:"handleSubmitRegisterForm",value:function(e){e.preventDefault(),this.setState({isRedirectToSuccessPages:!0})}},{key:"handleInputChange",value:function(e){this.setState({isBlocking:e.target.value.length>0});var t=e.target,n=t.name,a=t.value;this.setState(Object(h.a)({},n,a))}},{key:"render",value:function(){var e=this;if(this.state.isRedirectToSuccessPages)return r.a.createElement(m.b,{to:"/registerSuccess/"+this.state.txtFullName});var t=this.props.match.params.userName;return r.a.createElement("div",null,r.a.createElement(m.a,{when:this.state.isBlocking,message:function(e){return"Are you sure you want to go to ".concat(e.pathname)}}),r.a.createElement("form",{onSubmit:function(t){return e.handleSubmitRegisterForm(t)}},r.a.createElement("legend",null,"Register Form For User: ",t),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"txtUserName"},"User Name"),r.a.createElement("input",{onChange:function(t){return e.handleInputChange(t)},type:"text",className:"form-control",name:"txtUserName",placeholder:"User Name",value:t,disabled:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"txtFullName"},"Full Name"),r.a.createElement("input",{onChange:function(t){return e.handleInputChange(t)},type:"text",className:"form-control",name:"txtFullName",placeholder:"Full Name"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"txtEmail"},"Email"),r.a.createElement("input",{onChange:function(t){return e.handleInputChange(t)},type:"email",className:"form-control",name:"txtEmail",placeholder:"Email"})),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit")))}}]),n}(a.Component),F=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props.match.params.userName;return r.a.createElement("div",{className:"page-header"},r.a.createElement("h1",null,"Register Success With User Name ",e))}}]),n}(a.Component),J=n(34),D=function(e){var t=e.component,n=Object(J.a)(e,["component"]);return r.a.createElement(m.c,Object.assign({},n,{render:function(e){return sessionStorage.getItem("token")?r.a.createElement(t,e):r.a.createElement(m.b,{to:{pathname:"/login",state:{from:e.location}}})}}))},U=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(m.e,null,r.a.createElement(m.c,{exact:!0,path:"/",component:x}),r.a.createElement(m.c,{path:"/login",component:y}),r.a.createElement(m.c,{path:"/register/:userName",component:B}),r.a.createElement(m.c,{path:"/registerSuccess/:userName",component:F}),r.a.createElement(D,{path:"/detail/:cid",component:w}),r.a.createElement(m.c,{component:I})))}}]),n}(a.Component),A=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"navbar"},r.a.createElement("ul",{className:"nav navbar-nav"},r.a.createElement("li",{className:"active"},r.a.createElement(C.b,{to:"/"},"Home")),r.a.createElement("li",{className:"active"},r.a.createElement(C.b,{to:"/login"},"Login"))))}}]),n}(a.Component),L=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.restoreInterval()}},{key:"restoreInterval",value:function(){console.log("restoreInterval"),sessionStorage.getItem("token")&&O.intervalRefreshToken(sessionStorage.getItem("tokenExpirationTime"))}},{key:"render",value:function(){return r.a.createElement(N,null,r.a.createElement(C.a,null,r.a.createElement(A,null),r.a.createElement(U,null)))}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[35,1,2]]]);
//# sourceMappingURL=main.b94cd66d.chunk.js.map